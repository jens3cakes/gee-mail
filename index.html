<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<title>Geemail</title>
    <script>
      window.onload = function(){
		//console.log(window.geemails) 
		//I changed the window.geemail[i] to the parameter items.
		


		var emailCount = document.createElement('h2');
		emailCount.innerHTML = "Message Count";
		main.appendChild(emailCount);

		var countNum = document.createElement('h3');
		countNum.className = "inbox";
		countNum.innerHTML = geemails.length;
		emailCount.appendChild(countNum);
		
		
	   //console.log()
		
		
		//messageCount.innerHTML= ;
		//emailCount.appendChild(messageCount);

		function readEmail(items){
          for (var i=0; i<items.length; i++){
			var messageBox = document.createElement("div");
				messageBox.className = "message";
                main.appendChild(messageBox);    

            var senderBox = document.createElement("ul");
            senderBox.className = "sender";
            senderBox.innerHTML = "Sender: " + items[i].sender;
            messageBox.appendChild(senderBox);

            var subjectBox = document.createElement("ul");
            subjectBox.className = "subject";
            subjectBox.innerHTML = "Subject: " + items[i].subject;
            senderBox.appendChild(subjectBox);

            var dateBox = document.createElement("ul");
            dateBox.className = "date";
            dateBox.innerHTML = "Date: " + items[i].date;
			senderBox.appendChild(dateBox);

			var bodyBox = document.createElement('button');
			bodyBox.className = "messageButton";
			bodyBox.innerHTML='Message';
			senderBox.appendChild(bodyBox)

			var messageBox = document.createElement("ul");
			    messageBox.className='innerMessage'
			   messageBox.innerHTML=items[i].body;
			   bodyBox.appendChild(messageBox);
		   
			}
		}
		readEmail(window.geemails)
		 
		var openEmail = document.getElementsByClassName("messageButton");
		   for (var i = 0; i<openEmail.length;i++){
			   openEmail[i].addEventListener('click', openFunc);
		   }
			 
		   //I changed the if statement to 'block','none','block' so the message will show on the first click.

		   function openFunc(){
			   var seeMessage = this.querySelectorAll('.innerMessage')[0]
				 if (seeMessage.style.display === "block"){
					 seeMessage.style.display = "none";
				 }else{
					 seeMessage.style.display = "block";
				 }
					}
		
					//console.log(getNewMessage())
		var myVar = setInterval(yourVar(getNewMessage), 5000);
		 
		function yourVar(item){
			for (var i= 0; i<item.length; i++);
			
			var updateCount= document.getElementsByClassName('inbox');
			updateCount.items++;
            console.log(updateCount);

		    var newWindow = document.createElement('div');
			newWindow.className="whoNow";
			main.appendChild(newWindow);
			
			var whoSend = document.createElement('ul');
			whoSend.className = "sender"
			whoSend.innerHTML=item(i).sender;
			newWindow.appendChild(whoSend);
			
			var whenSend = document.createElement('ul');
			whenSend.className=('date');
			whenSend.innerHTML=item(i).date;
			whoSend.appendChild(whenSend);

			var whySend = document.createElement('ul');
			whySend.className=('subject');
			whySend.innerHTML=item(i).subject;
			whoSend.appendChild(whySend);
			
			var whatSendButton = document.createElement('button');
			whatSendButton.className=('messageButton');
			whatSendButton.innerHTML= "Message:";
			whoSend.appendChild(whatSendButton);

			var whatSend = document.createElement('ul');
			whatSend.className=('innerMessage');
			whatSend.innerHTML=item(i).body;
			whatSendButton.appendChild(whatSend);
			}	
			
		var openEmail = document.getElementsByClassName("messageButton");
		   for (var i = 0; i<openEmail.length;i++){
			    openEmail[i].addEventListener('click', openFunc);
			
		   }
			 
		   //I changed the if statement to 'block','none','block' so the message will show on the first click.

		   function openFunc(){
			   var seeMessage = this.querySelectorAll('.innerMessage')[0]
				 if (seeMessage.style.display === "block"){
					 seeMessage.style.display = "none";
				 }else{
					 seeMessage.style.display = "block";
				 }
					}
			
		 


		// ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser			
	  
			} 
    </script>
	</head>
	<body>
	   <h1>GeeMails</h1>
	   <h2 id="count"></h2>
       



		 <div class="container" id="main">
		
		</div>




		</div>
	</body>
</html>