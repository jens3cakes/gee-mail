<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<title>Geemail</title>
    <script>
      window.onload = function(){
		//console.log(window.geemails) 
		//I changed the window.geemail[i] to the parameter items.
	    var emailCount = document.createElement('h2');
		emailCount.innerHTML = "Inbox: ";
		main.appendChild(emailCount);

		var countNum = document.createElement('h3');
		countNum.className = "inbox";
		countNum.innerHTML = "";
	    emailCount.appendChild(countNum);
		
		function readEmail(items){
          for (var i=0; i<items.length; i++){
			var openMessageBox = document.createElement("div");
				openMessageBox.className = "message";
                main.appendChild(openMessageBox);    

            var senderBox = document.createElement("ul");
            senderBox.className = "sender";
            senderBox.innerHTML = "Sender: " + items[i].sender;
            openMessageBox.appendChild(senderBox);

            var subjectBox = document.createElement("ul");
            subjectBox.className = "subject";
            subjectBox.innerHTML = "Subject: " + items[i].subject;
            openMessageBox.appendChild(subjectBox);

            var dateBox = document.createElement("ul");
            dateBox.className = "date";
            dateBox.innerHTML = "Date: " + items[i].date;
			openMessageBox.appendChild(dateBox);

			var bodyBox = document.createElement('button');
			bodyBox.className = "messageButton";
			bodyBox.innerHTML='Message';
			openMessageBox.appendChild(bodyBox)

			var messageBox = document.createElement("ul");
			    messageBox.className='innerMessage'
			   messageBox.innerHTML=items[i].body;
			   bodyBox.appendChild(messageBox);
		  }
		}
		   readEmail(geemails);
	         var openEmail = document.getElementsByClassName("messageButton");
		   for (var i = 0; i<openEmail.length;i++){
			   openEmail[i].addEventListener('click', openFunc);
		   }

		   function openFunc(){
			   var seeMessage = this.querySelectorAll('.innerMessage')[0]
				 if (seeMessage.style.display === "block"){
					 seeMessage.style.display = "none";
				 }else{
					 seeMessage.style.display = "block";
				 }
				}
				var mailCount= document.getElementsByClassName('message');
				countNum.innerHTML=mailCount.length
                  
				
               
		function yourVar(){

		var newItems=getNewMessage();
	   	var newMail = document.createElement('div');
		newMail.className='message';
		main.appendChild(newMail);

		 var whoSend = document.createElement('ul');
		 whoSend.className='sender';
		 whoSend.innerHTML= 'Sender: ' + newItems.sender;
		 newMail.appendChild(whoSend);

		 var whenSend = document.createElement('ul');
		 whenSend.className='date';
		 whenSend.innerHTML='Date: ' + newItems.date;
		 whoSend.appendChild(whenSend);

		 var whySend = document.createElement('ul');
		 whySend.className='subject';
		 whySend.innerHTML= newItems.subject;
		 whoSend.appendChild(whySend);
		 
		 var whatSendButton = document.createElement('button');
		 whatSendButton.className='messageButtonNew';
		 whatSendButton.innerHTML='Message'
		 whoSend.appendChild(whatSendButton);

		 var whatSend = document.createElement('ul');
		 whatSend.className='innerMessageNew';
		 whatSend.innerHTML= newItems.body;
		 whatSendButton.appendChild(whatSend);
		
		  var readNewMail = document.getElementsByClassName('messageButtonNew');
		 for (var i = 0; i<readNewMail.length; i++){
			 readNewMail[i].addEventListener('click',openNewMail);
		 }

		 function openNewMail(){
		   var seeNewMail = this.querySelectorAll('.innerMessageNew')[0];
		   if (seeNewMail.style.display === 'block'){
			   seeNewMail.style.display = 'none'
		   }else{
			   seeNewMail.style.display = 'block';
		   }
		}  
		 } 
		 //setInterval(yourVar,3000);
		 
		 
	   
		// ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser			
	  
			} 
    </script>
	</head>
	<body>
	   <h1>GeeMails</h1>
	   <div id ='count'></div>
       



		 <div class="container" id="main">
		
		</div>




		</div>
	</body>
</html>