<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
		//console.log(window.geemails) 
		function readEmail(items){
          for (var i=0; i<window.geemails.length; i++){
			var messageBox = document.createElement("div");
				messageBox.className = "message";
                main.appendChild(messageBox);    

            var senderBox = document.createElement("ul");
            senderBox.className = "sender";
            senderBox.innerHTML = "Sender: " + window.geemails[i].sender;
            messageBox.appendChild(senderBox);

            var subjectBox = document.createElement("ul");
            subjectBox.className = "subject";
            subjectBox.innerHTML = "Subject: " + window.geemails[i].subject;
            senderBox.appendChild(subjectBox);

            var dateBox = document.createElement("ul");
            dateBox.className = "date";
            dateBox.innerHTML = "Date: " + window.geemails[i].date;
			senderBox.appendChild(dateBox);

			var bodyBox = document.createElement('button');
			bodyBox.className = "messageButton";
			bodyBox.innerHTML='Message';
			senderBox.appendChild(bodyBox)

			var messageBox = document.createElement("ul");
			    messageBox.className='innerMessage'
			   messageBox.innerHTML=window.geemails[i].body;
			   bodyBox.appendChild(messageBox);
            
		  }
		}
		readEmail(window.geemails)
		   
		   var openEmail = document.getElementsByClassName("messageButton");
		   for (var i = 0; i<openEmail.length;i++){
			   openEmail[i].addEventListener('click', openFunc);
		   }
			 
		   function openFunc(){
			   var seeMessage = this.querySelectorAll('.innerMessage')[0]
				 if (seeMessage.style.display === "none"){
					 seeMessage.style.display = "block";
				 }else{
					 seeMessage.style.display = "none";
				 }
				   
			   
		   }
				
			 
			 var count = document.getElementById('count');
		        count.innerHTML = "GeeMails: "+window.geemails.length;

				var messageInterval = document.getElementById("newMessage");
				messageInterval.addEventListener('click',myFunction);
				function myFunction(){
				setInterval(window.getNewMessage,1000);
				}
		 
		 


		// ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser			
	  
			} 
    </script>
	</head>
	<body>
	   <h1>GeeMails</h1>
	   <h2 id="count"></h2>
       <button id = 'newMessage'>New Messages</button>



		 <div class="container" id="main">
		
		</div>




		</div>
	</body>
</html>